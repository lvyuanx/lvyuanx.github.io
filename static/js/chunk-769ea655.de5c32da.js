(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-769ea655"],{"408a":function(e,t,o){var a=o("e330");e.exports=a(1..valueOf)},"4a78":function(e,t,o){"use strict";o("dd79")},7156:function(e,t,o){var a=o("1626"),n=o("861d"),s=o("d2bb");e.exports=function(e,t,o){var r,i;return s&&a(r=t.constructor)&&r!==o&&n(i=r.prototype)&&i!==o.prototype&&s(e,i),e}},"81b0":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.closePoup},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("van-cascader",{attrs:{title:"请选择家庭住址",options:e.options},on:{close:function(t){e.show=!1},finish:e.onFinish},model:{value:e.cascaderValue,callback:function(t){e.cascaderValue=t},expression:"cascaderValue"}})],1)],1)},n=[],s=(o("a15b"),o("d81d"),o("7c15")),r={name:"SelectAddress",props:{isShow:{type:Boolean,require:!1,default:!1},userId:{type:String,require:!1,defalut:""}},data:function(){return{show:!1,fieldValue:"",cascaderValue:"",options:[]}},watch:{show:{immediate:!0,handler:function(e,t){e&&this.findAll()}},isShow:{immediate:!0,handler:function(e,t){this.show=e}}},methods:{onFinish:function(e){var t=this,o=e.selectedOptions;this.show=!1;var a=o[o.length-1].value;this.fieldValue=o.map((function(e){return e.text})).join("/");this.fieldValue;this.$dialog.confirm({title:"选择完成",message:"是否确定绑定："+this.fieldValue}).then((function(){var e={userId:t.userId,householdId:a,selectedOptions:o};t.$bus.$emit("changeAddress",e)})).catch((function(){}))},findAll:function(){var e=this;Object(s["l"])().then((function(t){e.options=t.data}))},closePoup:function(){this.$bus.$emit("changeShow",!1)}}},i=r,c=o("2877"),l=Object(c["a"])(i,a,n,!1,null,null,null);t["a"]=l.exports},"939b":function(e,t,o){},a15b:function(e,t,o){"use strict";var a=o("23e7"),n=o("e330"),s=o("44ad"),r=o("fc6a"),i=o("a640"),c=n([].join),l=s!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(r(this),void 0===e?",":e)}})},a9e3:function(e,t,o){"use strict";var a=o("83ab"),n=o("da84"),s=o("e330"),r=o("94ca"),i=o("6eeb"),c=o("1a2d"),l=o("7156"),u=o("3a9b"),d=o("d9b5"),f=o("c04e"),h=o("d039"),p=o("241c").f,v=o("06cf").f,b=o("9bf2").f,g=o("408a"),m=o("58a8").trim,y="Number",I=n[y],C=I.prototype,x=n.TypeError,k=s("".slice),w=s("".charCodeAt),_=function(e){var t=f(e,"number");return"bigint"==typeof t?t:N(t)},N=function(e){var t,o,a,n,s,r,i,c,l=f(e,"number");if(d(l))throw x("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=m(l),t=w(l,0),43===t||45===t){if(o=w(l,2),88===o||120===o)return NaN}else if(48===t){switch(w(l,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(s=k(l,2),r=s.length,i=0;i<r;i++)if(c=w(s,i),c<48||c>n)return NaN;return parseInt(s,a)}return+l};if(r(y,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var S,q=function(e){var t=arguments.length<1?0:I(_(e)),o=this;return u(C,o)&&h((function(){g(o)}))?l(Object(t),o,q):t},U=a?p(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),B=0;U.length>B;B++)c(I,S=U[B])&&!c(q,S)&&b(q,S,v(I,S));q.prototype=C,C.constructor=q,i(n,y,q)}},b924:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("nav-top-bar",{attrs:{title:"用户管理",leftArrow:!0,rightArrow:!0}}),o("van-tabs",{staticClass:"box tabBox",model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[o("van-tab",{staticClass:"box",attrs:{title:"社区住户"}}),o("van-tab",{attrs:{disabled:!e.isAdmin,title:"管理员"}}),o("van-tab",{attrs:{title:"非社区用户"}}),o("UserGroup",{attrs:{active:e.active}})],1)],1)},n=[],s=(o("d81d"),o("7c15")),r=o("a5d7"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:e.query.searchName,callback:function(t){e.$set(e.query,"searchName",t)},expression:"query.searchName"}}),o("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[o("van-list",{attrs:{"immediate-check":!0,error:e.error,finished:e.finished,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[0==e.active?o("div",{staticClass:"box"},e._l(e.list,(function(e){return o("community-user-info",{key:e.userId,attrs:{userInfo:e}})})),1):e._e(),1==e.active?o("div",{staticClass:"box"},e._l(e.list,(function(e){return o("admin-user-info",{key:e.userId,attrs:{userInfo:e}})})),1):e._e(),2==e.active?o("div",{staticClass:"box"},e._l(e.list,(function(e){return o("other-user-info",{key:e.userId,attrs:{userInfo:e}})})),1):e._e()])],1),o("select-address",{attrs:{isShow:e.showSelectAddress,userId:e.selectUserId}})],1)},c=[],l=o("5530"),u=(o("a9e3"),o("a434"),o("d3b7"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box exceptionInfoBox"},[o("van-swipe-cell",{staticClass:"box cellBox",scopedSlots:e._u([{key:"left",fn:function(){return[o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"info",text:"转码"},on:{click:e.changeCode}})]},proxy:!0},{key:"right",fn:function(){return[o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"primary",text:"重置"},on:{click:e.resetPassword}}),o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"danger",text:"删除"},on:{click:e.deleteUser}})]},proxy:!0}])},[o("van-row",{staticClass:"rowBox"},[o("van-col",{attrs:{span:"8 imageBox"}},[o("img",{staticClass:"img",attrs:{src:e.avatarUrl}})]),o("van-col",{attrs:{span:"16 infoBox"}},[o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("姓名：")]),e._v(e._s(e.userInfo.user.realName)+" ")]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("电话：")]),e._v(e._s(e.userInfo.user.mobil)+" ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("健康码：")]),o("span",{staticClass:"typeBox",style:e.tabStyle},[e._v(e._s(null==e.qrCodeInfo.codeTypeName?"未知":e.qrCodeInfo.codeTypeName))])]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("连续健康打卡：")]),e._v(e._s(e.day)+"天 ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"24"}},[o("van-divider",{style:{marginTop:"3px",marginBottom:"0px",color:"#1989fa",borderColor:"#1989fa"}},[e._v("住址")])],1),o("van-col",{attrs:{span:"24"}},[o("van-button",{attrs:{plain:"",type:"info"},on:{click:function(t){return e.showPopup(e.userInfo.userId)}}},[e._v(e._s(e.userInfo.periodNumber)+" / "+e._s(e.userInfo.buildingNumber)+" / "+e._s(e.userInfo.unitNumber)+" / "+e._s(e.userInfo.layerNumber)+" / "+e._s(e.userInfo.householdNumber))])],1)],1)],1)],1)],1),o("van-dialog",{attrs:{title:"转码",showCancelButton:""},on:{confirm:e.confirm},model:{value:e.changeCodeBox,callback:function(t){e.changeCodeBox=t},expression:"changeCodeBox"}},[o("van-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"灰码",clickable:""},on:{click:function(t){e.radio="gray"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"gray"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"绿码",clickable:""},on:{click:function(t){e.radio="green"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"green"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"黄码",clickable:""},on:{click:function(t){e.radio="yellow"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"yellow"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"红码",clickable:""},on:{click:function(t){e.radio="red"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"red"}})]},proxy:!0}])})],1)],1)],1)],1)}),d=[],f=(o("498a"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861"),{props:{userInfo:{type:Object,required:!0,default:0}},name:"CommunityUserInfo",data:function(){return{changeCodeBox:!1,radio:"green",showSelectAddress:!1,selectUserId:"",avatarUrl:"/img/default/defaultHead.png",tabStyle:{backgroundColor:"#00a94e"},day:0,qrCodeInfo:{codeType:"",codeTypeName:""}}},created:function(){this.createUrl(),this.qrCodeGetInfoByUser(),this.continuousDay()},watch:{qrCodeInfo:{deep:!0,immediate:!0,handler:function(e,t){switch(this.qrCodeInfo.codeType){case"red":this.tabStyle.backgroundColor="#e74033";break;case"yellow":this.tabStyle.backgroundColor="#fcc72d";break;case"gray":this.tabStyle.backgroundColor="#e2e3e5";break;case"green":this.tabStyle.backgroundColor="#00a94e";break;default:break}}}},methods:{createUrl:function(){var e=this;null!=this.userInfo.user.avatar&&""!=this.userInfo.user.avatar.trim()&&Object(s["y"])({path:this.userInfo.user.avatar},{}).then((function(t){e.avatarUrl=window.URL.createObjectURL(t)}))},qrCodeGetInfoByUser:function(){var e=this;Object(s["G"])({userId:this.userInfo.userId}).then((function(t){200==t.code?e.qrCodeInfo=t.data:e.$toast("查询用户("+e.userInfo.user.realName+")健康码信息异常")}))},continuousDay:function(){var e=this;Object(s["h"])({userId:this.userInfo.userId}).then((function(t){200==t.code&&(e.day=t.data)}))},showPopup:function(e){var t={userId:e,isShow:!0};this.$bus.$emit("showSelectAddress",t)},changeCode:function(){this.radio=this.qrCodeInfo.codeType,this.changeCodeBox=!0},confirm:function(){var e=this;Object(s["g"])({userId:this.userInfo.userId,codeType:this.radio}).then((function(t){if(e.$toast(t.message),200==t.code)switch(e.qrCodeInfo.codeType=e.radio,e.qrCodeInfo.codeType){case"red":e.qrCodeInfo.codeTypeName="红码";break;case"yellow":e.qrCodeInfo.codeTypeName="黄码";break;case"gray":e.qrCodeInfo.codeTypeName="灰码";break;case"green":e.qrCodeInfo.codeTypeName="绿码";break;default:e.qrCodeInfo.codeTypeName="未知";break}}))},resetPassword:function(){var e=this;Object(s["J"])({userId:this.userInfo.userId}).then((function(t){e.$toast(t.message)}))},deleteUser:function(){var e=this;this.$dialog.confirm({title:"警告",message:"删除后无法恢复，确认删除？"}).then((function(){Object(s["j"])({userId:e.userInfo.userId}).then((function(t){e.$toast(t.message),e.$bus.$emit("changeList",e.userInfo.userId)}))})).catch((function(){}))}}}),h=f,p=(o("d385"),o("2877")),v=Object(p["a"])(h,u,d,!1,null,"19ca6da6",null),b=v.exports,g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box exceptionInfoBox"},[o("van-swipe-cell",{staticClass:"box cellBox",scopedSlots:e._u([{key:"right",fn:function(){return[o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"primary",text:"重置"},on:{click:e.resetPassword}}),o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"danger",text:"删除"},on:{click:e.deleteUser}})]},proxy:!0}])},[o("van-row",{staticClass:"rowBox"},[o("van-col",{staticClass:"imageBox",attrs:{span:"8"}},[o("img",{staticClass:"img",attrs:{src:e.avatarUrl}})]),o("van-col",{attrs:{span:"16 infoBox"}},[o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("姓名：")]),e._v(e._s(e.userInfo.user.realName)+" ")]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("电话：")]),e._v(e._s(e.userInfo.user.mobil)+" ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("健康码：")]),o("span",{staticClass:"typeBox",style:e.tabStyle},[e._v(e._s(null==e.qrCodeInfo.codeTypeName?"未知":e.qrCodeInfo.codeTypeName))])]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("连续健康打卡：")]),e._v(e._s(e.day)+"天 ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"24"}},[o("van-divider",{style:{marginTop:"3px",marginBottom:"0px",color:"#1989fa",borderColor:"#1989fa"}},[e._v("住址")])],1),o("van-col",{attrs:{span:"24"}},[null!=e.userInfo.householdId?o("van-button",{attrs:{plain:"",type:"info"},on:{click:function(t){return t.stopPropagation(),e.showPopup(e.userInfo.userId)}}},[e._v(e._s(e.userInfo.periodNumber)+" / "+e._s(e.userInfo.buildingNumber)+" / "+e._s(e.userInfo.unitNumber)+" / "+e._s(e.userInfo.layerNumber)+" / "+e._s(e.userInfo.householdNumber))]):e._e(),null==e.userInfo.householdId?o("van-button",{staticStyle:{width:"100%"},attrs:{plain:"",type:"info",icon:"plus"},on:{click:function(t){return e.showPopup(e.userInfo.userId)}}},[e._v("添加地址")]):e._e()],1)],1)],1)],1)],1),o("van-dialog",{attrs:{title:"转码",showCancelButton:""},on:{confirm:e.confirm},model:{value:e.changeCodeBox,callback:function(t){e.changeCodeBox=t},expression:"changeCodeBox"}},[o("van-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"灰码",clickable:""},on:{click:function(t){e.radio="gray"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"gray"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"绿码",clickable:""},on:{click:function(t){e.radio="green"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"green"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"黄码",clickable:""},on:{click:function(t){e.radio="yellow"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"yellow"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"红码",clickable:""},on:{click:function(t){e.radio="red"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"red"}})]},proxy:!0}])})],1)],1)],1)],1)},m=[],y={props:{userInfo:{type:Object,required:!0,default:0}},name:"OtherUserInfo",data:function(){return{changeCodeBox:!1,radio:"green",showSelectAddress:!1,selectUserId:"",avatarUrl:"/img/default/defaultHead.png",tabStyle:{backgroundColor:"#00a94e"},day:0,qrCodeInfo:{codeType:"",codeTypeName:""}}},created:function(){this.createUrl(),this.qrCodeGetInfoByUser(),this.continuousDay()},mounted:function(){},beforeDestroy:function(){this.$bus.$off("changeShow"),this.$bus.$off("changeAddress")},watch:{qrCodeInfo:{deep:!0,immediate:!0,handler:function(e,t){switch(this.qrCodeInfo.codeType){case"red":this.tabStyle.backgroundColor="#e74033";break;case"yellow":this.tabStyle.backgroundColor="#fcc72d";break;case"gray":this.tabStyle.backgroundColor="#e2e3e5";break;case"green":this.tabStyle.backgroundColor="#00a94e";break;default:break}}}},methods:{createUrl:function(){var e=this;null!=this.userInfo.user.avatar&&""!=this.userInfo.user.avatar.trim()&&Object(s["y"])({path:this.userInfo.user.avatar},{}).then((function(t){e.avatarUrl=window.URL.createObjectURL(t)}))},qrCodeGetInfoByUser:function(){var e=this;Object(s["G"])({userId:this.userInfo.userId}).then((function(t){200==t.code?e.qrCodeInfo=t.data:e.$toast("查询用户("+e.userInfo.user.realName+")健康码信息异常")}))},continuousDay:function(){var e=this;Object(s["h"])({userId:this.userInfo.userId}).then((function(t){200==t.code&&(e.day=t.data)}))},showPopup:function(e){var t={userId:e,isShow:!0};this.$bus.$emit("showSelectAddress",t)},changeCode:function(){this.radio=this.qrCodeInfo.codeType,this.changeCodeBox=!0},confirm:function(){var e=this;Object(s["g"])({userId:this.userInfo.userId,codeType:this.radio}).then((function(t){if(e.$toast(t.message),200==t.code)switch(e.qrCodeInfo.codeType=e.radio,e.qrCodeInfo.codeType){case"red":e.qrCodeInfo.codeTypeName="红码";break;case"yellow":e.qrCodeInfo.codeTypeName="黄码";break;case"gray":e.qrCodeInfo.codeTypeName="灰码";break;case"green":e.qrCodeInfo.codeTypeName="绿码";break;default:e.qrCodeInfo.codeTypeName="未知";break}}))},resetPassword:function(){var e=this;Object(s["J"])({userId:this.userInfo.userId}).then((function(t){e.$toast(t.message)}))},deleteUser:function(){var e=this;this.$dialog.confirm({title:"警告",message:"删除后无法恢复，确认删除？"}).then((function(){Object(s["j"])({userId:e.userInfo.userId}).then((function(t){e.$toast(t.message),e.$bus.$emit("changeList",e.userInfo.userId)}))})).catch((function(){}))}}},I=y,C=(o("ef0a"),Object(p["a"])(I,g,m,!1,null,"d544bbda",null)),x=C.exports,k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box exceptionInfoBox"},[o("van-swipe-cell",{staticClass:"box cellBox",scopedSlots:e._u([{key:"left",fn:function(){return[o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"info",text:"转码"},on:{click:e.changeCode}})]},proxy:!0},{key:"right",fn:function(){return[o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"primary",text:"重置"},on:{click:e.resetPassword}}),o("van-button",{staticClass:"cell-button",attrs:{square:"",type:"danger",text:"删除"},on:{click:e.deleteUser}})]},proxy:!0}])},[o("van-row",{staticClass:"rowBox"},[o("van-col",{attrs:{span:"8 imageBox"}},[o("img",{staticClass:"img",attrs:{src:e.avatarUrl}})]),o("van-col",{attrs:{span:"16 infoBox"}},[o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("姓名：")]),e._v(e._s(e.userInfo.user.realName)+" ")]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("电话：")]),e._v(e._s(e.userInfo.user.mobil)+" ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"10"}},[o("strong",[e._v("健康码：")]),o("span",{staticClass:"typeBox",style:e.tabStyle},[e._v(e._s(null==e.qrCodeInfo.codeTypeName?"未知":e.qrCodeInfo.codeTypeName))])]),o("van-col",{attrs:{span:"14"}},[o("strong",[e._v("连续健康打卡：")]),e._v(e._s(e.day)+"天 ")])],1),o("van-row",{staticClass:"lineBox"},[o("van-col",{attrs:{span:"24"}},[o("van-divider",{style:{marginTop:"3px",marginBottom:"0px",color:"#1989fa",borderColor:"#1989fa"}},[e._v("角色功能")])],1),o("van-col",{attrs:{span:"24"}},e._l(e.userInfo.user.roleVoList,(function(t){return o("van-tag",{key:t.id,staticStyle:{margin:"3px"},attrs:{type:"primary"}},[e._v(e._s(t.roleName))])})),1)],1)],1)],1)],1),o("select-address",{attrs:{isShow:e.showSelectAddress,userId:e.selectUserId}}),o("van-dialog",{attrs:{title:"转码",showCancelButton:""},on:{confirm:e.confirm},model:{value:e.changeCodeBox,callback:function(t){e.changeCodeBox=t},expression:"changeCodeBox"}},[o("van-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"灰码",clickable:""},on:{click:function(t){e.radio="gray"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"gray"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"绿码",clickable:""},on:{click:function(t){e.radio="green"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"green"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"黄码",clickable:""},on:{click:function(t){e.radio="yellow"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"yellow"}})]},proxy:!0}])}),o("van-cell",{attrs:{title:"红码",clickable:""},on:{click:function(t){e.radio="red"}},scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-radio",{attrs:{name:"red"}})]},proxy:!0}])})],1)],1)],1)],1)},w=[],_=o("81b0"),N={props:{userInfo:{type:Object,required:!0,default:0}},name:"AdminUserInfo",components:{SelectAddress:_["a"]},data:function(){return{changeCodeBox:!1,radio:"green",showSelectAddress:!1,selectUserId:"",avatarUrl:"/img/default/defaultHead.png",tabStyle:{backgroundColor:"#00a94e"},day:0,qrCodeInfo:{codeType:"",codeTypeName:""}}},created:function(){this.createUrl(),this.qrCodeGetInfoByUser(),this.continuousDay()},watch:{qrCodeInfo:{deep:!0,immediate:!0,handler:function(e,t){switch(this.qrCodeInfo.codeType){case"red":this.tabStyle.backgroundColor="#e74033";break;case"yellow":this.tabStyle.backgroundColor="#fcc72d";break;case"gray":this.tabStyle.backgroundColor="#e2e3e5";break;case"green":this.tabStyle.backgroundColor="#00a94e";break;default:break}}}},methods:{createUrl:function(){var e=this;null!=this.userInfo.user.avatar&&""!=this.userInfo.user.avatar.trim()&&Object(s["y"])({path:this.userInfo.user.avatar},{}).then((function(t){e.avatarUrl=window.URL.createObjectURL(t)}))},qrCodeGetInfoByUser:function(){var e=this;Object(s["G"])({userId:this.userInfo.userId}).then((function(t){200==t.code?e.qrCodeInfo=t.data:e.$toast("查询用户("+e.userInfo.user.realName+")健康码信息异常")}))},continuousDay:function(){var e=this;Object(s["h"])({userId:this.userInfo.userId}).then((function(t){200==t.code&&(e.day=t.data)}))},changeCode:function(){this.radio=this.qrCodeInfo.codeType,this.changeCodeBox=!0},confirm:function(){var e=this;Object(s["g"])({userId:this.userInfo.userId,codeType:this.radio}).then((function(t){if(e.$toast(t.message),200==t.code)switch(e.qrCodeInfo.codeType=e.radio,e.qrCodeInfo.codeType){case"red":e.qrCodeInfo.codeTypeName="红码";break;case"yellow":e.qrCodeInfo.codeTypeName="黄码";break;case"gray":e.qrCodeInfo.codeTypeName="灰码";break;case"green":e.qrCodeInfo.codeTypeName="绿码";break;default:e.qrCodeInfo.codeTypeName="未知";break}}))},resetPassword:function(){var e=this;Object(s["J"])({userId:this.userInfo.userId}).then((function(t){e.$toast(t.message)}))},deleteUser:function(){var e=this;this.$dialog.confirm({title:"警告",message:"删除后无法恢复，确认删除？"}).then((function(){Object(s["j"])({userId:e.userInfo.userId}).then((function(t){e.$toast(t.message),e.$bus.$emit("changeList",e.userInfo.userId)}))})).catch((function(){}))}}},S=N,q=(o("4a78"),Object(p["a"])(S,k,w,!1,null,"cee94dca",null)),U=q.exports,B={props:{active:{type:Number,required:!1,default:0}},name:"UserGroup",components:{NavTopBar:r["a"],CommunityUserInfo:b,OtherUserInfo:x,AdminUserInfo:U,SelectAddress:_["a"]},data:function(){return{showSelectAddress:!1,selectUserId:"",isAdmin:!1,refreshing:!1,loading:!1,finished:!1,error:!1,pageInfo:{pageSize:6,pageNum:1,hasNextPage:!1,hasPreviousPage:!1,isFirstPage:!0,isLastPage:!0},list:[],query:{status:this.active,searchName:""}}},mounted:function(){var e=this;this.$bus.$on("showSelectAddress",(function(t){e.showSelectAddress=t.isShow,e.selectUserId=t.userId})),this.$bus.$on("changeShow",(function(t){e.showSelectAddress=t})),this.$bus.$on("changeAddress",(function(t){t.selectedOptions;var o=t.userId,a=t.householdId;e.updateHouseholdUser(o,a)}))},created:function(){this.findUserHousehold()},beforeDestroy:function(){this.$bus.$off("showSelectAddress"),this.$bus.$off("changeShow"),this.$bus.$off("changeAddress")},computed:{},watch:{query:{deep:!0,immediate:!1,handler:function(){this.list.splice(0,this.list.length),this.findUserHousehold()}},active:{immediate:!0,handler:function(){this.query.status=this.active}}},methods:{changeList:function(e){var t=this;this.list.length>0&&this.list.forEach((function(o,a){o.userId==e&&t.list.splice(a,1)}))},updateHouseholdUser:function(e,t){var o=this,a={userId:e,householdId:t};Object(s["M"])(a).then((function(e){200==e.code?(o.$toast.success("修改成功"),o.list.splice(0,o.list.length),o.handlPage(),o.findUserHousehold()):o.$toast.fail("修改失败")}))},onLoad:function(){this.pageInfo.hasNextPage?(this.loading=!0,this.pageInfo.pageNum++,this.findUserHousehold()):(this.loading=!1,this.finished=!0)},onRefresh:function(){this.refreshing=!0,this.list.splice(0,this.list.length),this.handlPage(),this.findUserHousehold()},onSearch:function(e){},handlQuery:function(e){this.pageInfo.hasNextPage=e.hasNextPage,this.pageInfo.hasPreviousPage=e.hasPreviousPage,this.pageInfo.isFirstPage=e.isFirstPage,this.pageInfo.isLastPage=e.isLastPage},findUserHousehold:function(){var e=this,t={pageSize:this.pageInfo.pageSize,pageNum:this.pageInfo.pageNum},o=Object(l["a"])({},this.query);Object(s["x"])(t,o).then((function(t){200==t.code?t.data.list.length>0&&t.data.list.forEach((function(t){e.list.push(t)})):e.$toast("查询用户失败"),e.handlQuery(t.data),e.refreshing=!1,e.loading=!1,t.data.hasNextPage,e.finished=!1}))},handlPage:function(){this.pageInfo={pageSize:10,pageNum:1,hasNextPage:!1,hasPreviousPage:!1,isFirstPage:!0,isLastPage:!0}}}},$=B,T=Object(p["a"])($,i,c,!1,null,"11a73a80",null),O=T.exports,j={components:{NavTopBar:r["a"],UserGroup:O},name:"UserManagement",data:function(){return{active:0,isAdmin:!1}},created:function(){this.isAdminCheck()},methods:{isAdminCheck:function(){var e=this;Object(s["v"])().then((function(t){if(200==t.code){var o=t.data.map((function(e){return e.label}));console.log(o),o.indexOf("role")>-1?e.isAdmin=!0:e.isAdmin=!1}}))}}},A=j,P=Object(p["a"])(A,a,n,!1,null,"a1f99f0e",null);t["default"]=P.exports},bc13:function(e,t,o){},d385:function(e,t,o){"use strict";o("939b")},d81d:function(e,t,o){"use strict";var a=o("23e7"),n=o("b727").map,s=o("1dde"),r=s("map");a({target:"Array",proto:!0,forced:!r},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},dd79:function(e,t,o){},ef0a:function(e,t,o){"use strict";o("bc13")}}]);
//# sourceMappingURL=chunk-769ea655.de5c32da.js.map