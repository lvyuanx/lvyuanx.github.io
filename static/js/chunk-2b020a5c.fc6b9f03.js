(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b020a5c"],{"0b42":function(e,t,s){var n=s("da84"),r=s("e8b5"),o=s("68ee"),i=s("861d"),a=s("b622"),u=a("species"),c=n.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,o(t)&&(t===c||r(t.prototype))?t=void 0:i(t)&&(t=t[u],null===t&&(t=void 0))),void 0===t?c:t}},"159b":function(e,t,s){var n=s("da84"),r=s("fdbc"),o=s("785a"),i=s("17c2"),a=s("9112"),u=function(e){if(e&&e.forEach!==i)try{a(e,"forEach",i)}catch(t){e.forEach=i}};for(var c in r)r[c]&&u(n[c]&&n[c].prototype);u(o)},"17c2":function(e,t,s){"use strict";var n=s("b727").forEach,r=s("a640"),o=r("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1a70":function(e,t,s){},"1dde":function(e,t,s){var n=s("d039"),r=s("b622"),o=s("2d00"),i=r("species");e.exports=function(e){return o>=51||!n((function(){var t=[],s=t.constructor={};return s[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"2afc":function(e,t,s){},"65f0":function(e,t,s){var n=s("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},"81b0":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.closePoup},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("van-cascader",{attrs:{title:"请选择家庭住址",options:e.options},on:{close:function(t){e.show=!1},finish:e.onFinish},model:{value:e.cascaderValue,callback:function(t){e.cascaderValue=t},expression:"cascaderValue"}})],1)],1)},r=[],o=(s("a15b"),s("d81d"),s("7c15")),i={name:"SelectAddress",props:{isShow:{type:Boolean,require:!1,default:!1},userId:{type:String,require:!1,defalut:""}},data:function(){return{show:!1,fieldValue:"",cascaderValue:"",options:[]}},watch:{show:{immediate:!0,handler:function(e,t){e&&this.findAll()}},isShow:{immediate:!0,handler:function(e,t){this.show=e}}},methods:{onFinish:function(e){var t=this,s=e.selectedOptions;this.show=!1;var n=s[s.length-1].value;this.fieldValue=s.map((function(e){return e.text})).join("/");this.fieldValue;this.$dialog.confirm({title:"选择完成",message:"是否确定绑定："+this.fieldValue}).then((function(){var e={userId:t.userId,householdId:n,selectedOptions:s};t.$bus.$emit("changeAddress",e)})).catch((function(){}))},findAll:function(){var e=this;Object(o["l"])().then((function(t){e.options=t.data}))},closePoup:function(){this.$bus.$emit("changeShow",!1)}}},a=i,u=s("2877"),c=Object(u["a"])(a,n,r,!1,null,null,null);t["a"]=c.exports},a15b:function(e,t,s){"use strict";var n=s("23e7"),r=s("e330"),o=s("44ad"),i=s("fc6a"),a=s("a640"),u=r([].join),c=o!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return u(i(this),void 0===e?",":e)}})},a434:function(e,t,s){"use strict";var n=s("23e7"),r=s("da84"),o=s("23cb"),i=s("5926"),a=s("07fa"),u=s("7b0b"),c=s("65f0"),l=s("8418"),f=s("1dde"),h=f("splice"),d=r.TypeError,p=Math.max,v=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var s,n,r,f,h,b,x=u(this),w=a(x),y=o(e,w),N=arguments.length;if(0===N?s=n=0:1===N?(s=0,n=w-y):(s=N-2,n=v(p(i(t),0),w-y)),w+s-n>g)throw d(m);for(r=c(x,n),f=0;f<n;f++)h=y+f,h in x&&l(r,f,x[h]);if(r.length=n,s<n){for(f=y;f<w-n;f++)h=f+n,b=f+s,h in x?x[b]=x[h]:delete x[b];for(f=w;f>w-n+s;f--)delete x[f-1]}else if(s>n)for(f=w-n;f>y;f--)h=f+n-1,b=f+s-1,h in x?x[b]=x[h]:delete x[b];for(f=0;f<s;f++)x[f+y]=arguments[f+2];return x.length=w-n+s,r}})},a4f0:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("nav-top-bar",{attrs:{title:"住户审批",leftArrow:!0,rightArrow:!0}}),s("user-in-household")],1)},r=[],o=s("a5d7"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("form",{attrs:{action:"/"}},[s("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:e.onSearch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),s("van-pull-refresh",{staticClass:"box",on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[s("van-list",{attrs:{"immediate-check":!1,error:e.error,finished:e.finished,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return s("van-swipe-cell",{key:t.userId,scopedSlots:e._u([{key:"right",fn:function(){return[s("van-button",{staticClass:"success-button",attrs:{square:"",text:"通过",type:"primary"},on:{click:function(s){return e.householdExamination(t.userId,1)}}}),s("van-button",{staticClass:"delete-button",attrs:{square:"",text:"拒绝",type:"danger"},on:{click:function(s){return e.householdExamination(t.userId,0)}}})]},proxy:!0}],null,!0)},[s("div",{staticClass:"itemBox"},[s("van-row",{staticClass:"rowBox"},[s("van-col",{staticClass:"colBox imageBox",attrs:{span:"8"}},[s("img",{staticClass:"img",attrs:{src:t.avatarUrl,alt:"用户头像"}})]),s("van-col",{attrs:{span:"16"}},[s("ul",[s("li",[s("strong",{staticClass:"titleBox"},[e._v("姓名：")]),e._v(e._s(t.user.realName))]),s("li",[s("strong",{staticClass:"titleBox"},[e._v("电话：")]),e._v(e._s(t.user.mobil))]),s("li",[s("van-divider",{style:{marginTop:"3px",marginBottom:"0px",color:"#1989fa",borderColor:"#1989fa"}},[e._v("住址")])],1),s("li",[s("van-button",{attrs:{plain:"",type:"info"},on:{click:function(s){return e.showPopup(t.userId)}}},[e._v(e._s(t.periodNumber)+" / "+e._s(t.buildingNumber)+" / "+e._s(t.unitNumber)+" / "+e._s(t.layerNumber)+" / "+e._s(t.householdNumber))])],1)])])],1)],1)])})),1)],1),s("select-address",{attrs:{isShow:e.showSelectAddress,userId:e.selectUserId}})],1)},a=[],u=(s("d3b7"),s("159b"),s("a434"),s("3ca3"),s("ddb0"),s("2b3d"),s("9861"),s("7c15")),c=s("81b0"),l={name:"UserInHousehold",data:function(){return{list:[],error:!1,loading:!1,value:"",refreshing:!1,finished:!1,showSelectAddress:!1,selectUserId:"",queryBo:{pageNum:1,pageSize:5,userName:"",hasNextPage:!1,hasPreviousPage:!1,isFirstPage:!0,isLastPage:!0}}},components:{SelectAddress:c["a"]},created:function(){this.findUserHousehold()},mounted:function(){var e=this;this.$bus.$on("changeShow",(function(t){e.showSelectAddress=t})),this.$bus.$on("changeAddress",(function(t){var s=t.selectedOptions,n=t.userId,r=t.householdId;e.updateHouseholdUser(n,r),console.log(s),e.list.length>0&&e.list.forEach((function(t,r){t.userId==n&&(e.list[r].periodNumber=s[0].text,e.list[r].buildingNumber=s[1].text,e.list[r].unitNumber=s[2].text,e.list[r].layerNumber=s[3].text,e.list[r].householdNumber=s[4].text)}))}))},beforeDestroy:function(){this.$bus.$off("changeShow"),this.$bus.$off("changeAddress")},methods:{onLoad:function(){this.queryBo.hasNextPage?(this.loading=!0,this.queryBo.pageNum++,this.findUserHousehold()):(this.loading=!1,this.finished=!0)},onRefresh:function(){this.handlQuery(),this.loading=!0,this.finished=!1,this.list.length>0&&this.list.splice(0,this.list.length),this.findUserHousehold()},onSearch:function(e){this.handlQuery(),this.queryBo.userName=e,this.list.length>0&&this.list.splice(0,this.list.length),this.findUserHousehold()},findUserHousehold:function(){var e=this,t={userName:this.queryBo.userName},s={pageNum:this.queryBo.pageNum,pageSize:this.queryBo.pageSize};Object(u["w"])(s,t).then((function(t){if(200==t.code){e.queryBo.hasNextPage=t.data.hasNextPage,e.queryBo.hasPreviousPage=t.data.hasPreviousPage,e.queryBo.isFirstPage=t.data.isFirstPage,e.queryBo.isLastPage=t.data.isLastPage,e.loading=!1,e.refreshing=!1;var s=t.data.list;s.length>0&&s.forEach((function(t){var s;t.avatarUrl="/img/default/defaultHead.png",null!==t.user.avatar&&(s=t.user.avatar,e.createUrl(s,t.userId)),e.list.push(t)}))}else e.$toast(t.message);0==e.list.length&&(e.finished=!0)}))},createUrl:function(e,t){var s=this;Object(u["y"])({path:e},{}).then((function(e){var n=window.URL.createObjectURL(e);s.list.forEach((function(e,r){e.userId==t&&(e.avatarUrl=n,s.list.splice(r,1,e))}))}))},handlQuery:function(){this.queryBo={pageNum:1,pageSize:5,userName:this.queryBo.userName,hasNextPage:!1,hasPreviousPage:!1,isFirstPage:!0,isLastPage:!0}},showPopup:function(e){this.showSelectAddress=!0,this.selectUserId=e},updateHouseholdUser:function(e,t){var s=this,n={userId:e,householdId:t};Object(u["M"])(n).then((function(e){200==e.code?s.$toast.success("修改成功"):s.$toast.fail("修改失败")}))},householdExamination:function(e,t){var s=this;Object(u["z"])({userId:e,examineStatus:t}).then((function(t){200==t.code?s.list.forEach((function(t,n){t.userId==e&&s.list.splice(n,1),s.$toast.success("操作成功")})):s.$toast.fail("操作失败")}))}}},f=l,h=(s("ff50"),s("2877")),d=Object(h["a"])(f,i,a,!1,null,"5157ff07",null),p=d.exports,v={name:"HouseholExamination",components:{NavTopBar:o["a"],UserInHousehold:p},data:function(){return{active:0}}},g=v,m=(s("bfb4"),Object(h["a"])(g,n,r,!1,null,"99582a6a",null));t["default"]=m.exports},a5d7:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-sticky",{attrs:{"offset-top":0}},[s("van-nav-bar",{attrs:{title:e.title,"left-text":e.leftText,"left-arrow":e.leftArrow,fixed:"",placeholder:""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight},scopedSlots:e._u([e.rightArrow?{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"wap-home-o",size:"18"}})]},proxy:!0}:null],null,!0)})],1)},r=[],o=(s("ac1f"),s("5319"),{name:"NavTopBar",props:["title","leftArrow","rightArrow"],data:function(){return{leftTextStr:"返回"}},methods:{onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.$router.replace({name:"home"})}},computed:{leftText:function(){return this.leftArrow?this.leftTextStr:""}}}),i=o,a=s("2877"),u=Object(a["a"])(i,n,r,!1,null,"72fa6fb3",null);t["a"]=u.exports},a640:function(e,t,s){"use strict";var n=s("d039");e.exports=function(e,t){var s=[][e];return!!s&&n((function(){s.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,s){var n=s("0366"),r=s("e330"),o=s("44ad"),i=s("7b0b"),a=s("07fa"),u=s("65f0"),c=r([].push),l=function(e){var t=1==e,s=2==e,r=3==e,l=4==e,f=6==e,h=7==e,d=5==e||f;return function(p,v,g,m){for(var b,x,w=i(p),y=o(w),N=n(v,g),A=a(y),P=0,B=m||u,I=t?B(p,A):s||h?B(p,0):void 0;A>P;P++)if((d||P in y)&&(b=y[P],x=N(b,P,w),e))if(t)I[P]=x;else if(x)switch(e){case 3:return!0;case 5:return b;case 6:return P;case 2:c(I,b)}else switch(e){case 4:return!1;case 7:c(I,b)}return f?-1:r||l?l:I}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},bfb4:function(e,t,s){"use strict";s("1a70")},d81d:function(e,t,s){"use strict";var n=s("23e7"),r=s("b727").map,o=s("1dde"),i=o("map");n({target:"Array",proto:!0,forced:!i},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,s){var n=s("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},ff50:function(e,t,s){"use strict";s("2afc")}}]);
//# sourceMappingURL=chunk-2b020a5c.fc6b9f03.js.map